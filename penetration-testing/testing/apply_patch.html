<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.5 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="vi" class="no-js">
<head>
    <meta charset="utf-8">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MKP69WF');</script>
<!-- End Google Tag Manager -->

<!-- begin _includes/seo.html --><title>Thiết lập để kiểm thử không bị gián đoạn - &lt; for EC-CUBE 4 Developers /&gt;</title>
<meta name="description" content="Ví dụ, trong quá trình kiểm thử, có thể xảy ra trường hợp người dùng đang thực hiện kiểm thử bảo mật bị xóa hoặc quyền truy cập trang bị thay đổi khiến không thể truy cập được nữa.Để ngăn chặn điều này và đảm bảo kiểm thử ổn định, cần chỉnh sửa trực tiếp vào mã nguồn EC-CUBE.">



<meta property="og:type" content="article">
<meta property="og:locale" content="vi_VN">
<meta property="og:site_name" content="EC-CUBE 4 開発者向けドキュメントサイト">
<meta property="og:title" content="Thiết lập để kiểm thử không bị gián đoạn">
<meta property="og:url" content="https://thanpd-kaopiz.github.io/doc4-ec-cube-vn/penetration-testing/testing/apply_patch">


  <meta property="og:description" content="Ví dụ, trong quá trình kiểm thử, có thể xảy ra trường hợp người dùng đang thực hiện kiểm thử bảo mật bị xóa hoặc quyền truy cập trang bị thay đổi khiến không thể truy cập được nữa.Để ngăn chặn điều này và đảm bảo kiểm thử ổn định, cần chỉnh sửa trực tiếp vào mã nguồn EC-CUBE.">



  <meta property="og:image" content="https://thanpd-kaopiz.github.io/doc4-ec-cube-vn/assets/images/site-logo.png">





  <meta property="article:published_time" content="2025-06-20T10:15:25+00:00">





  

  


<link rel="canonical" href="https://thanpd-kaopiz.github.io/doc4-ec-cube-vn/penetration-testing/testing/apply_patch">





  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "url": "https://thanpd-kaopiz.github.io/doc4-ec-cube-vn",
      "logo": "https://thanpd-kaopiz.github.io/doc4-ec-cube-vn/assets/images/site-logo.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "EC-CUBE",
      "url": "https://thanpd-kaopiz.github.io/doc4-ec-cube-vn",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->

<!-- Google Search Console -->
<meta name="google-site-verification" content="RaTQVaBvAuWi45pAV3ydq19nxTrbyV1vooYDZqFA5kQ" />


<link href="/doc4-ec-cube-vn/feed.xml" type="application/atom+xml" rel="alternate" title="< for EC-CUBE 4 Developers /> Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/doc4-ec-cube-vn/assets/css/main.css">
<link rel="stylesheet" href="/doc4-ec-cube-vn/assets/font-awesome-4.7.0/css/font-awesome.min.css">
<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="shortcut icon" href="/doc4-ec-cube-vn/assets/images/favicon.ico">

<!-- end custom head snippets -->

</head>

<body class="layout--single">
<nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

<!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->



<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/doc4-ec-cube-vn/">
          < for EC-CUBE 4 Developers />
          <span class="site-subtitle">EC-CUBE 4 開発者向けドキュメントサイト</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="https://www.ec-cube.net/" target="_blank" >Về EC-CUBE</a>
            </li><li class="masthead__menu-item">
              <a href="https://xoops.ec-cube.net/" target="_blank" >Cộng đồng phát triển</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


<div class="initial-content">
    



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">ec-cube.co</span>
        

        
        <ul>
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/co" class="">ec-cube.co là gì</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/co/co_security" class="">Về các biện pháp bảo mật</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/co/co_update_guidelines" class="">Hướng dẫn cập nhật</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/co/co_console" class="">Console</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/co/co_naming_rules" class="">Quy tắc đặt tên</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/co/co_git" class="">Đặc tả chức năng quản lý Git</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/co/co_customize_dir_usage" class="">Cách sử dụng thư mục tùy chỉnh</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/co/co_staging" class="">Xây dựng môi trường thử nghiệm</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/co/co_log" class="">Cách lấy log</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/co/co_faq" class="">FAQ</a></li>
              
          
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Giới thiệu</span>
        

        
        <ul>
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/quickstart/latest_version" class="">Phiên bản mới nhất</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/quickstart/requirement" class="">Yêu cầu hệ thống</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/quickstart/cautions_of_prod" class="">Lưu ý khi sử dụng trong môi trường sản xuất</a></li>
              
          
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Thông tin cho người mới bắt đầu</span>
        

        
        <ul>
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/learning/learning_step" class="">Các bước học tập</a></li>
              
          
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Cài đặt</span>
        

        
        <ul>
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/quickstart/install" class="">Các phương pháp cài đặt khác nhau</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/quickstart/cli" class="">Giao diện dòng lệnh</a></li>
              
          
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Nâng cấp phiên bản</span>
        

        
        <ul>
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/update43" class="">Nâng cấp phiên bản chính từ 4.2 lên 4.3</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/update-42-43" class="">Di chuyển từ 4.2 lên 4.3</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/update-41-42" class="">Di chuyển từ 4.1 lên 4.2</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/update41" class="">Nâng cấp phiên bản chính từ 4.0 lên 4.1</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/update-40-41" class="">Di chuyển từ 4.0 lên 4.1</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/update42x" class="">Nâng cấp phiên bản chính 4.2</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/update41x" class="">Nâng cấp phiên bản chính 4.1</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/update" class="">Nâng cấp phiên bản chính 4.0</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/update/4_0_3" class="">Lưu ý trong phiên bản 4.0.3</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/hotfix_samesite_cookie" class="">Hỗ trợ Cookie SameSite</a></li>
              
          
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Đặc tả chức năng</span>
        

        
        <ul>
          
            
              
              

              
              

              
                <li><a href="https://www.ec-cube.net/product/functions.php" target="_blank" class="">Danh sách chức năng</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/spec_order" class="">Liên quan đến đơn hàng</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/spec_tax" class="">Cài đặt thuế suất</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/spec_payment" class="">Cài đặt phương thức thanh toán</a></li>
              
          
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Tùy chỉnh hệ thống</span>
        

        
        <ul>
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/spec_directory-structure" class="">Cấu trúc thư mục</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/customize_controller" class="">Tùy chỉnh Controller</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/customize_entity" class="">Tùy chỉnh Entity</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/customize_repository" class="">Tùy chỉnh Repository</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/customize_formtype" class="">Tùy chỉnh FormType</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/customize_service" class="">Tùy chỉnh quy trình mua hàng</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/customize_order_state_machine" class="">Tùy chỉnh trạng thái đơn hàng</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/customize_template" class="">Tùy chỉnh mẫu giao diện</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/customize_throttling" class="">Tùy chỉnh chức năng throttling</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/customize_twig_sandbox" class="">Kiểm soát danh sách cho phép bằng Twig Sandbox</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/customize_symfony" class="">Mở rộng bằng chức năng của Symfony</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/customize_symfony#command" class="">Phát triển Command</a></li>
              
          
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Tùy chỉnh thiết kế</span>
        

        
        <ul>
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/design_template" class="">Cơ bản về mẫu thiết kế</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/design_block" class="">Sử dụng block</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/design_layout" class="">Sử dụng quản lý bố cục</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/design_img" class="">Về quản lý hình ảnh</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/design_css" class="">Sử dụng CSS</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/design_sass" class="">Sử dụng Sass(scss)</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/design_form" class="">Thay đổi bố cục form</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/design_messages" class="">Tùy chỉnh thông điệp</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="https://eccube4-styleguide.herokuapp.com" target="_blank" class="">Tài liệu tham khảo thiết kế giao diện người dùng (hướng dẫn phong cách)</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="https://thanpd-kaopiz.github.io/doc4-ec-cube-vn/pdf/ec-cube4_design-guide180930.pdf" target="_blank" class="">Tài liệu tham khảo thiết kế giao diện quản trị (hướng dẫn thiết kế)</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="http://downloads.ec-cube.net/manual/documents/eccube4_xd_front_template.zip?argument=2qpV46CP&dmai=a5bf51b05bacc5" target="_blank" class="">Mẫu giao diện người dùng cho Adobe XD</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="http://downloads.ec-cube.net/manual/documents/eccube4_xd_admin_template.zip?argument=2qpV46CP&dmai=a5bf51b05bacc5" target="_blank" class="">Mẫu giao diện quản trị cho Adobe XD</a></li>
              
          
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Phát triển plugin</span>
        

        
        <ul>
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/plugin_spec" class="">Đặc tả plugin</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/plugin_install" class="">Cài đặt plugin</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/plugin_error" class="">Cách xử lý sự cố plugin</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/plugin_sample" class="">Mẫu plugin</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/plugin_development" class="">Phát triển plugin</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/plugin_mock_package_api" class="">Kiểm tra cài đặt qua Owner's Store</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/plugin_naming_conventions" class="">Quy tắc đặt tên khuyến nghị cho plugin</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/plugin_admin_nav" class="">Mở rộng điều hướng quản trị</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/plugin_eccube40" class="">Lưu ý khi sử dụng EC-CUBE4.0 (Composer v1)</a></li>
              
          
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Thay đổi cài đặt</span>
        

        
        <ul>
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/i18n_multilingualization" class="">Đa ngôn ngữ</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/i18n_currency" class="">Tiền tệ</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/i18n_timezone" class="">Múi giờ</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/environmental_setting" class="">Cài đặt môi trường</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/debug_mode" class="">Chế độ gỡ lỗi</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/session_handler_settings" class="">Phương pháp lưu trữ phiên</a></li>
              
          
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Công cụ phát triển</span>
        

        
        <ul>
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/development-tools/mail-catcher" class="">MailCatcher</a></li>
              
          
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Thực hiện kiểm tra bảo mật</span>
        

        
        <ul>
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/penetration-testing" class="">Giới thiệu</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/penetration-testing/quick_start" class="">Bắt đầu nhanh</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/penetration-testing/introduction" class="">Giới thiệu</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/penetration-testing/about_owaspzap" class="">Về OWASP ZAP</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/penetration-testing/planning" class="">Lập kế hoạch kiểm tra</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/penetration-testing/testing" class="">Thực hiện kiểm tra</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/penetration-testing/review" class="">Đánh giá kiểm tra</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/penetration-testing/improvement" class="">Cải thiện bảo mật</a></li>
              
          
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Hướng dẫn bảo mật</span>
        

        
        <ul>
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/security-guideline/coding" class="">Về mã hóa</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/security-guideline/plugin" class="">Tăng cường bảo mật trong phát triển plugin</a></li>
              
          
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Tham khảo ngược</span>
        

        
        <ul>
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/reverse-lookup/tips" class="">Mẹo</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/reverse-lookup/sample-code" class="">Bộ sưu tập mẫu tùy chỉnh</a></li>
              
          
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Tham gia phát triển</span>
        

        
        <ul>
          
            
              
              

              
              

              
                <li><a href="https://www.ec-cube.net/committer/" target="_blank" class="">Làm thế nào để tham gia phát triển EC-CUBE? (Trang web chính thức)</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/contribution-guide/overview" class="">Tổng quan về phát triển</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/contribution-guide/pull-request" class="">Cách tạo pull request</a></li>
              
          
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Khi không tìm thấy tài liệu</span>
        

        
        <ul>
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/documents/request" class="">Yêu cầu tài liệu</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/documents/writing-and-formatting" class="">Thêm và viết tài liệu</a></li>
              
          
          
            
              
              

              
              

              
                <li><a href="/doc4-ec-cube-vn/documents/contribute" class="">Đóng góp tài liệu</a></li>
              
          
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Thiết lập để kiểm thử không bị gián đoạn">
    <meta itemprop="description" content="Ví dụ, trong quá trình kiểm thử, có thể xảy ra trường hợp người dùng đang thực hiện kiểm thử bảo mật bị xóa hoặc quyền truy cập trang bị thay đổi khiến không thể truy cập được nữa.Để ngăn chặn điều này và đảm bảo kiểm thử ổn định, cần chỉnh sửa trực tiếp vào mã nguồn EC-CUBE.">
    <meta itemprop="datePublished" content="June 20, 2025">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Thiết lập để kiểm thử không bị gián đoạn
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
<!--
            <a href="#disqus_thread" style="font-size:21px;margin-bottom:3px;">
              <img src="//c.disquscdn.com/next/current/publisher-admin/assets/img/emoji/love-512x512.png" style="height: 24px;width: 24px;">
              ページを評価/質問する
              <img src="//c.disquscdn.com/next/current/publisher-admin/assets/img/emoji/sad-512x512.png" style="height: 24px;width: 24px;">
            </a>
-->
            <a href="https://github.com/thanpd-kaopiz/doc4-ec-cube-vn/edit/gh-pages/_pages/penetration-testing/testing/apply_patch.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Chỉnh sửa trang</a>
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Mục lục</h4></header>
              <ul class="toc__menu">
  <li><a href="#màn-hình-quản-trị">Màn hình quản trị</a>
    <ul>
      <li><a href="#ngăn-chặn-xóa-quy-cách-phân-loại-quy-cách">Ngăn chặn xóa quy cách, phân loại quy cách</a></li>
      <li><a href="#ngăn-chặn-logout">Ngăn chặn logout</a></li>
      <li><a href="#ngăn-chặn-cập-nhật-quản-lý-quyền-hạn">Ngăn chặn cập nhật quản lý quyền hạn</a></li>
      <li><a href="#ngăn-chặn-cập-nhật-master-data">Ngăn chặn cập nhật master data</a></li>
      <li><a href="#ngăn-chặn-cập-nhật-thông-tin-user-quản-trị">Ngăn chặn cập nhật thông tin user quản trị</a></li>
      <li><a href="#ngăn-chặn-cập-nhật-quản-lý-bảo-mật">Ngăn chặn cập nhật quản lý bảo mật</a></li>
    </ul>
  </li>
  <li><a href="#màn-hình-front">Màn hình front</a>
    <ul>
      <li><a href="#ngăn-chặn-thay-đổi-thông-tin-hội-viên">Ngăn chặn thay đổi thông tin hội viên</a></li>
      <li><a href="#ngăn-chặn-giới-hạn-số-lượng-địa-chỉ-nhận-hàng">Ngăn chặn giới hạn số lượng địa chỉ nhận hàng</a></li>
      <li><a href="#ngăn-chặn-xóa-thông-tin-địa-chỉ-nhận-hàng">Ngăn chặn xóa thông tin địa chỉ nhận hàng</a></li>
      <li><a href="#ngăn-chặn-thêm-sản-phẩm-yêu-thích">Ngăn chặn thêm sản phẩm yêu thích</a></li>
      <li><a href="#ngăn-chặn-xóa-sản-phẩm-yêu-thích">Ngăn chặn xóa sản phẩm yêu thích</a></li>
      <li><a href="#ngăn-chặn-hội-viên-rút-khỏi-hệ-thống">Ngăn chặn hội viên rút khỏi hệ thống</a></li>
      <li><a href="#ngăn-chặn-đăng-ký-hội-viên-tạm-thời">Ngăn chặn đăng ký hội viên tạm thời</a></li>
      <li><a href="#ngăn-chặn-đăng-ký-hội-viên-chính-thức">Ngăn chặn đăng ký hội viên chính thức</a></li>
      <li><a href="#không-xóa-giỏ-hàng-khi-hoàn-tất-đơn-hàng">Không xóa giỏ hàng khi hoàn tất đơn hàng</a></li>
      <li><a href="#gỡ-bỏ-giới-hạn-sử-dụng-plugin-coupon">Gỡ bỏ giới hạn sử dụng plugin coupon</a></li>
    </ul>
  </li>
</ul>
            </nav>
          </aside>
        
        <p>Ví dụ, trong quá trình kiểm thử, có thể xảy ra trường hợp người dùng đang thực hiện kiểm thử bảo mật bị xóa hoặc quyền truy cập trang bị thay đổi khiến không thể truy cập được nữa.
Để ngăn chặn điều này và đảm bảo kiểm thử ổn định, cần chỉnh sửa trực tiếp vào mã nguồn EC-CUBE.</p>

<p><a href="/patches/testing.patch">Xem toàn bộ file patch tại đây</a></p>

<p class="notice--warning"><strong>Lưu ý:</strong> Ngoài các chỉnh sửa này, khi kiểm thử các chức năng xóa, cần comment out <code class="language-plaintext highlighter-rouge">EntityManager::flush()</code> trong các xử lý liên quan để đảm bảo thao tác xóa được rollback.</p>

<h2 id="màn-hình-quản-trị">Màn hình quản trị</h2>

<h3 id="ngăn-chặn-xóa-quy-cách-phân-loại-quy-cách">Ngăn chặn xóa quy cách, phân loại quy cách</h3>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/src/Eccube/Repository/ClassCategoryRepository.php b/src/Eccube/Repository/ClassCategoryRepository.php
index 8f08c2b9b2..4b4d9abdec 100644
</span><span class="gd">--- a/src/Eccube/Repository/ClassCategoryRepository.php
</span><span class="gi">+++ b/src/Eccube/Repository/ClassCategoryRepository.php
</span><span class="p">@@ -103,7 +103,7 @@</span> class ClassCategoryRepository extends AbstractRepository

         $em = $this-&gt;getEntityManager();
         $em-&gt;remove($ClassCategory);
<span class="gd">-        $em-&gt;flush();
</span><span class="gi">+        // $em-&gt;flush();
</span>     }

     /**
<span class="gh">diff --git a/src/Eccube/Repository/ClassNameRepository.php b/src/Eccube/Repository/ClassNameRepository.php
index 7e894b0585..4809d8262b 100644
</span><span class="gd">--- a/src/Eccube/Repository/ClassNameRepository.php
</span><span class="gi">+++ b/src/Eccube/Repository/ClassNameRepository.php
</span><span class="p">@@ -92,6 +92,6 @@</span> class ClassNameRepository extends AbstractRepository

         $em = $this-&gt;getEntityManager();
         $em-&gt;remove($ClassName);
<span class="gd">-        $em-&gt;flush();
</span><span class="gi">+        // $em-&gt;flush();
</span>     }
 }
</code></pre></div></div>

<h3 id="ngăn-chặn-logout">Ngăn chặn logout</h3>

<p>Khi logout, session sẽ bị ngắt và token CSRF sẽ thay đổi, dẫn đến kiểm thử thất bại. Vì vậy, cần vô hiệu hóa chức năng logout.</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/app/config/eccube/packages/security.yaml b/app/config/eccube/packages/security.yaml
index 2ad4e1a608..8da71094d0 100644
</span><span class="gd">--- a/app/config/eccube/packages/security.yaml
</span><span class="gi">+++ b/app/config/eccube/packages/security.yaml
</span><span class="p">@@ -34,9 +34,9 @@</span> security:
                 use_forward: false
                 success_handler: eccube.security.success_handler
                 failure_handler: eccube.security.failure_handler
<span class="gd">-            logout:
-                path: admin_logout
-                target: admin_login
</span><span class="gi">+            # logout:
+            #     path: admin_logout
+            #     target: admin_login
</span>         customer:
             pattern: ^/
             anonymous: true

</code></pre></div></div>

<h3 id="ngăn-chặn-cập-nhật-quản-lý-quyền-hạn">Ngăn chặn cập nhật quản lý quyền hạn</h3>

<p>Nếu URL từ chối quyền hạn bị đăng ký là <code class="language-plaintext highlighter-rouge">/</code>, sẽ không thể truy cập màn hình quản trị. Cần ngăn chặn điều này.</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/src/Eccube/Controller/Admin/Setting/System/AuthorityController.php b/src/Eccube/Controller/Admin/Setting/System/AuthorityController.php
index 2f69bd5f62..4d2f4fdde1 100644
</span><span class="gd">--- a/src/Eccube/Controller/Admin/Setting/System/AuthorityController.php
</span><span class="gi">+++ b/src/Eccube/Controller/Admin/Setting/System/AuthorityController.php
</span><span class="p">@@ -103,7 +103,7 @@</span> class AuthorityController extends AbstractController
                     }
                 }
             }
<span class="gd">-            $this-&gt;entityManager-&gt;flush();
</span><span class="gi">+            // $this-&gt;entityManager-&gt;flush();
</span>
             $event = new EventArgs(
                 [

</code></pre></div></div>

<h3 id="ngăn-chặn-cập-nhật-master-data">Ngăn chặn cập nhật master data</h3>

<p>Ngăn chặn việc master data bị cập nhật không mong muốn, dẫn đến các chức năng không hoạt động.</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/src/Eccube/Controller/Admin/Setting/System/MasterdataController.php b/src/Eccube/Controller/Admin/Setting/System/MasterdataController.php
index 9b661031ab..a517b9a6ff 100644
</span><span class="gd">--- a/src/Eccube/Controller/Admin/Setting/System/MasterdataController.php
</span><span class="gi">+++ b/src/Eccube/Controller/Admin/Setting/System/MasterdataController.php
</span><span class="p">@@ -162,7 +162,7 @@</span> class MasterdataController extends AbstractController
                 }

                 try {
<span class="gd">-                    $this-&gt;entityManager-&gt;flush();
</span><span class="gi">+                    // $this-&gt;entityManager-&gt;flush();
</span>
                     $event = new EventArgs(
                         [

</code></pre></div></div>

<h3 id="ngăn-chặn-cập-nhật-thông-tin-user-quản-trị">Ngăn chặn cập nhật thông tin user quản trị</h3>

<p>Ngăn chặn việc thay đổi mật khẩu hoặc ID của user đang kiểm thử.</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/src/Eccube/Controller/Admin/Setting/System/MemberController.php b/src/Eccube/Controller/Admin/Setting/System/MemberController.php
index d1f042f67a..0ce6235b77 100644
</span><span class="gd">--- a/src/Eccube/Controller/Admin/Setting/System/MemberController.php
</span><span class="gi">+++ b/src/Eccube/Controller/Admin/Setting/System/MemberController.php
</span><span class="p">@@ -188,7 +188,7 @@</span> class MemberController extends AbstractController
                 $Member-&gt;setPassword($encodedPassword);
             }

-            $this-&gt;memberRepository-&gt;save($Member);
<span class="gi">+            // $this-&gt;memberRepository-&gt;save($Member);
</span>
             $event = new EventArgs(
                 [

</code></pre></div></div>

<h3 id="ngăn-chặn-cập-nhật-quản-lý-bảo-mật">Ngăn chặn cập nhật quản lý bảo mật</h3>

<p>Ngăn chặn việc thay đổi nội dung quản lý bảo mật khiến không thể truy cập màn hình quản trị.</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/src/Eccube/Controller/Admin/Setting/System/SecurityController.php b/src/Eccube/Controller/Admin/Setting/System/SecurityController.php
index d48b4f36b2..a658bbd33b 100644
</span><span class="gd">--- a/src/Eccube/Controller/Admin/Setting/System/SecurityController.php
</span><span class="gi">+++ b/src/Eccube/Controller/Admin/Setting/System/SecurityController.php
</span><span class="p">@@ -71,28 +71,28 @@</span> class SecurityController extends AbstractController
                 'ECCUBE_FORCE_SSL' =&gt; $data['force_ssl'] ? 'true' : 'false',
             ]);

-            file_put_contents($envFile, $env);
<span class="gi">+            // file_put_contents($envFile, $env);
</span>
-            // Cập nhật URL màn hình quản trị. Nếu thay đổi thì logout và login lại.
<span class="gd">-            $adminRoute = $this-&gt;eccubeConfig['eccube_admin_route'];
-            if ($adminRoute !== $data['admin_route_dir']) {
-                $env = StringUtil::replaceOrAddEnv($env, [
-                    'ECCUBE_ADMIN_ROUTE' =&gt; $data['admin_route_dir'],
-                ]);
</span><span class="gi">+            // // Cập nhật URL màn hình quản trị. Nếu thay đổi thì logout và login lại.
+            // $adminRoute = $this-&gt;eccubeConfig['eccube_admin_route'];
+            // if ($adminRoute !== $data['admin_route_dir']) {
+            //     $env = StringUtil::replaceOrAddEnv($env, [
+            //         'ECCUBE_ADMIN_ROUTE' =&gt; $data['admin_route_dir'],
+            //     ]);
</span>
-                file_put_contents($envFile, $env);
<span class="gi">+            //     file_put_contents($envFile, $env);
</span>
-                $this-&gt;addSuccess('admin.setting.system.security.admin_url_changed', 'admin');
<span class="gi">+            //     $this-&gt;addSuccess('admin.setting.system.security.admin_url_changed', 'admin');
</span>
-                // Đăng xuất
<span class="gd">-                $this-&gt;tokenStorage-&gt;setToken(null);
</span><span class="gi">+            //     // Đăng xuất
+            //     $this-&gt;tokenStorage-&gt;setToken(null);
</span>
-                // Xóa cache
<span class="gd">-                $cacheUtil-&gt;clearCache();
</span><span class="gi">+            //     // Xóa cache
+            //     $cacheUtil-&gt;clearCache();
</span>
-                // Đăng nhập lại vào màn hình quản trị
<span class="gd">-                return $this-&gt;redirect($request-&gt;getBaseUrl().'/'.$data['admin_route_dir']);
-            }
</span><span class="gi">+            //     // Đăng nhập lại vào màn hình quản trị
+            //     return $this-&gt;redirect($request-&gt;getBaseUrl().'/'.$data['admin_route_dir']);
+            // }
</span>
             $this-&gt;addSuccess('admin.common.save_complete', 'admin');

</code></pre></div></div>

<h2 id="màn-hình-front">Màn hình front</h2>

<h3 id="ngăn-chặn-thay-đổi-thông-tin-hội-viên">Ngăn chặn thay đổi thông tin hội viên</h3>

<p>Ngăn chặn việc thay đổi thông tin hội viên khiến không thể đăng nhập lại.</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/src/Eccube/Controller/Mypage/ChangeController.php b/src/Eccube/Controller/Mypage/ChangeController.php
index 70121e110c..1846b6fbe6 100644
</span><span class="gd">--- a/src/Eccube/Controller/Mypage/ChangeController.php
</span><span class="gi">+++ b/src/Eccube/Controller/Mypage/ChangeController.php
</span><span class="p">@@ -97,7 +97,7 @@</span> class ChangeController extends AbstractController
                     $encoder-&gt;encodePassword($Customer-&gt;getPassword(), $Customer-&gt;getSalt())
                 );
             }
<span class="gd">-            $this-&gt;entityManager-&gt;flush();
</span><span class="gi">+            // $this-&gt;entityManager-&gt;flush();
</span>
             log_info('Hoàn thành chỉnh sửa hội viên');

</code></pre></div></div>

<h3 id="ngăn-chặn-giới-hạn-số-lượng-địa-chỉ-nhận-hàng">Ngăn chặn giới hạn số lượng địa chỉ nhận hàng</h3>

<p>Ngăn chặn việc vượt quá số lượng địa chỉ nhận hàng tối đa khiến kiểm thử thất bại.</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/src/Eccube/Controller/Mypage/DeliveryController.php b/src/Eccube/Controller/Mypage/DeliveryController.php
index af8dd653a6..803f3123f2 100644
</span><span class="gd">--- a/src/Eccube/Controller/Mypage/DeliveryController.php
</span><span class="gi">+++ b/src/Eccube/Controller/Mypage/DeliveryController.php
</span><span class="p">@@ -77,7 +77,7 @@</span> class DeliveryController extends AbstractController
             $addressCurrNum = count($Customer-&gt;getCustomerAddresses());
             $addressMax = $this-&gt;eccubeConfig['eccube_deliv_addr_max'];
             if ($addressCurrNum &gt;= $addressMax) {
<span class="gd">-                throw new NotFoundHttpException();
</span><span class="gi">+                // throw new NotFoundHttpException();
</span>             }
             $CustomerAddress = new CustomerAddress();
             $CustomerAddress-&gt;setCustomer($Customer);
</code></pre></div></div>

<h3 id="ngăn-chặn-xóa-thông-tin-địa-chỉ-nhận-hàng">Ngăn chặn xóa thông tin địa chỉ nhận hàng</h3>

<p>Ngăn chặn việc xóa thông tin địa chỉ nhận hàng khiến việc mua hàng thất bại.</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/src/Eccube/Controller/Mypage/DeliveryController.php b/src/Eccube/Controller/Mypage/DeliveryController.php
index f3ecbc1ed0..7bd7290c1a 100644
</span><span class="gd">--- a/src/Eccube/Controller/Mypage/DeliveryController.php
</span><span class="gi">+++ b/src/Eccube/Controller/Mypage/DeliveryController.php
</span><span class="p">@@ -170,7 +170,7 @@</span> class DeliveryController extends AbstractController
             throw new BadRequestHttpException();
         }

-        $this-&gt;customerAddressRepository-&gt;delete($CustomerAddress);
<span class="gi">+        // $this-&gt;customerAddressRepository-&gt;delete($CustomerAddress);
</span>
         $event = new EventArgs(
             [

</code></pre></div></div>

<h3 id="ngăn-chặn-thêm-sản-phẩm-yêu-thích">Ngăn chặn thêm sản phẩm yêu thích</h3>

<p>Ngăn chặn việc kiểm thử thêm sản phẩm yêu thích (<code class="language-plaintext highlighter-rouge">/products/add_favorite/&lt;id&gt;</code>) bị thất bại
<em>Không thể sử dụng đồng thời với patch ngăn chặn xóa sản phẩm yêu thích</em></p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/src/Eccube/Repository/CustomerFavoriteProductRepository.php b/src/Eccube/Repository/CustomerFavoriteProductRepository.php
index 24430036a4..cff5db5a64 100644
</span><span class="gd">--- a/src/Eccube/Repository/CustomerFavoriteProductRepository.php
</span><span class="gi">+++ b/src/Eccube/Repository/CustomerFavoriteProductRepository.php
</span><span class="p">@@ -45,7 +45,7 @@</span> class CustomerFavoriteProductRepository extends AbstractRepository

             $em = $this-&gt;getEntityManager();
             $em-&gt;persist($CustomerFavoriteProduct);
<span class="gd">-            $em-&gt;flush();
</span><span class="gi">+            // $em-&gt;flush();
</span>         }
     }
</code></pre></div></div>

<h3 id="ngăn-chặn-xóa-sản-phẩm-yêu-thích">Ngăn chặn xóa sản phẩm yêu thích</h3>

<p>Ngăn chặn việc xóa sản phẩm yêu thích khiến kiểm thử liên quan đến sản phẩm yêu thích bị thất bại
<em>Không thể sử dụng đồng thời với patch ngăn chặn thêm sản phẩm yêu thích</em></p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/src/Eccube/Controller/Mypage/MypageController.php b/src/Eccube/Controller/Mypage/MypageController.php
index d3abe49efd..b02a841954 100644
</span><span class="gd">--- a/src/Eccube/Controller/Mypage/MypageController.php
</span><span class="gi">+++ b/src/Eccube/Controller/Mypage/MypageController.php
</span><span class="p">@@ -362,7 +362,7 @@</span> class MypageController extends AbstractController
         $CustomerFavoriteProduct = $this-&gt;customerFavoriteProductRepository-&gt;findOneBy(['Customer' =&gt; $Customer, 'Product' =&gt; $Product]);

         if ($CustomerFavoriteProduct) {
<span class="gd">-            $this-&gt;customerFavoriteProductRepository-&gt;delete($CustomerFavoriteProduct);
</span><span class="gi">+            // $this-&gt;customerFavoriteProductRepository-&gt;delete($CustomerFavoriteProduct);
</span>         } else {
             throw new BadRequestHttpException();
         }

</code></pre></div></div>

<p class="notice--info"><strong>Lưu ý:</strong> Có thể kiểm thử luồng đăng ký→xóa bằng addon sequence</p>

<h3 id="ngăn-chặn-hội-viên-rút-khỏi-hệ-thống">Ngăn chặn hội viên rút khỏi hệ thống</h3>

<p>Ngăn chặn việc hội viên rút khỏi hệ thống khiến kiểm thử bị dừng lại</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/src/Eccube/Controller/Mypage/WithdrawController.php b/src/Eccube/Controller/Mypage/WithdrawController.php
index 796a0b943e..940709df9c 100644
</span><span class="gd">--- a/src/Eccube/Controller/Mypage/WithdrawController.php
</span><span class="gi">+++ b/src/Eccube/Controller/Mypage/WithdrawController.php
</span><span class="p">@@ -121,8 +121,8 @@</span> class WithdrawController extends AbstractController

                     // Chuyển sang trạng thái rút khỏi
                     $CustomerStatus = $this-&gt;customerStatusRepository-&gt;find(CustomerStatus::WITHDRAWING);
<span class="gd">-                    $Customer-&gt;setStatus($CustomerStatus);
-                    $Customer-&gt;setEmail(StringUtil::random(60).'@dummy.dummy');
</span><span class="gi">+                    //$Customer-&gt;setStatus($CustomerStatus);
+                    //$Customer-&gt;setEmail(StringUtil::random(60).'@dummy.dummy');
</span>
                     $this-&gt;entityManager-&gt;flush();

@@ -140,11 +140,11 @@ class WithdrawController extends AbstractController
                     $this-&gt;mailService-&gt;sendCustomerWithdrawMail($Customer, $email);

                     // Xóa session giỏ hàng và đơn hàng
<span class="gd">-                    $this-&gt;cartService-&gt;clear();
-                    $this-&gt;orderHelper-&gt;removeSession();
</span><span class="gi">+                    // $this-&gt;cartService-&gt;clear();
+                    // $this-&gt;orderHelper-&gt;removeSession();
</span>
                     // Đăng xuất
<span class="gd">-                    $this-&gt;tokenStorage-&gt;setToken(null);
</span><span class="gi">+                    // $this-&gt;tokenStorage-&gt;setToken(null);
</span>
                     log_info('Hoàn thành đăng xuất');

</code></pre></div></div>

<h3 id="ngăn-chặn-đăng-ký-hội-viên-tạm-thời">Ngăn chặn đăng ký hội viên tạm thời</h3>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/src/Eccube/Controller/EntryController.php b/src/Eccube/Controller/EntryController.php
index 076ac0a991..30a089994a 100644
</span><span class="gd">--- a/src/Eccube/Controller/EntryController.php
</span><span class="gi">+++ b/src/Eccube/Controller/EntryController.php
</span><span class="p">@@ -180,7 +180,7 @@</span> class EntryController extends AbstractController
                         -&gt;setPoint(0);

                     $this-&gt;entityManager-&gt;persist($Customer);
<span class="gd">-                    $this-&gt;entityManager-&gt;flush();
</span><span class="gi">+                    // $this-&gt;entityManager-&gt;flush();
</span>
                     log_info('Hoàn thành đăng ký hội viên');

</code></pre></div></div>

<h3 id="ngăn-chặn-đăng-ký-hội-viên-chính-thức">Ngăn chặn đăng ký hội viên chính thức</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@@ -293,7 +293,7 @@ class EntryController extends AbstractController
         $CustomerStatus = $this-&gt;customerStatusRepository-&gt;find(CustomerStatus::REGULAR);
         $Customer-&gt;setStatus($CustomerStatus);
         $this-&gt;entityManager-&gt;persist($Customer);
-        $this-&gt;entityManager-&gt;flush();
+        // $this-&gt;entityManager-&gt;flush();

         log_info('Hoàn thành đăng ký hội viên chính thức');

</code></pre></div></div>

<h3 id="không-xóa-giỏ-hàng-khi-hoàn-tất-đơn-hàng">Không xóa giỏ hàng khi hoàn tất đơn hàng</h3>

<p>Ngăn chặn việc xóa giỏ hàng khi hoàn tất đơn hàng.</p>

<p><em>Việc chuyển từ màn hình xác nhận đơn hàng sang hoàn tất chỉ là POST token CSRF tới <code class="language-plaintext highlighter-rouge">/shopping/checkout</code>, nên có thể không quá hữu ích.</em></p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/src/Eccube/Controller/ShoppingController.php b/src/Eccube/Controller/ShoppingController.php
index 8e99094d73..e8e744f39a 100644
</span><span class="gd">--- a/src/Eccube/Controller/ShoppingController.php
</span><span class="gi">+++ b/src/Eccube/Controller/ShoppingController.php
</span><span class="p">@@ -386,7 +386,7 @@</span> class ShoppingController extends AbstractShoppingController
                     return $response;
                 }

-                $this-&gt;entityManager-&gt;flush();
<span class="gi">+                //$this-&gt;entityManager-&gt;flush();
</span>
                 log_info('[Xử lý đơn hàng] Đã hoàn thành xử lý đơn hàng.', [$Order-&gt;getId()]);
             } catch (ShoppingException $e) {
<span class="p">@@ -409,7 +409,7 @@</span> class ShoppingController extends AbstractShoppingController

             // Xóa giỏ hàng
             log_info('[Xử lý đơn hàng] Xóa giỏ hàng.', [$Order-&gt;getId()]);
<span class="gd">-            $this-&gt;cartService-&gt;clear();
</span><span class="gi">+            //$this-&gt;cartService-&gt;clear();
</span>
             // Gán ID đơn hàng vào session
             $this-&gt;session-&gt;set(OrderHelper::SESSION_ORDER_ID, $Order-&gt;getId());
<span class="p">@@ -417,7 +417,7 @@</span> class ShoppingController extends AbstractShoppingController
             // Gửi mail
             log_info('[Xử lý đơn hàng] Gửi mail đơn hàng.', [$Order-&gt;getId()]);
             $this-&gt;mailService-&gt;sendOrderMail($Order);
<span class="gd">-            $this-&gt;entityManager-&gt;flush();
</span><span class="gi">+            //$this-&gt;entityManager-&gt;flush();
</span>
             log_info('[Xử lý đơn hàng] Đã hoàn thành xử lý đơn hàng. Chuyển sang màn hình hoàn tất.', [$Order-&gt;getId()]);

@@ -463,7 +463,7 @@ class ShoppingController extends AbstractShoppingController
         }

         log_info('[Hoàn tất đơn hàng] Xóa session luồng mua hàng.');
<span class="gd">-        $this-&gt;orderHelper-&gt;removeSession();
</span><span class="gi">+        //$this-&gt;orderHelper-&gt;removeSession();
</span>
         $hasNextCart = !empty($this-&gt;cartService-&gt;getCarts());

</code></pre></div></div>

<h3 id="gỡ-bỏ-giới-hạn-sử-dụng-plugin-coupon">Gỡ bỏ giới hạn sử dụng plugin coupon</h3>

<p>Cho phép sử dụng coupon lặp lại nhiều lần.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>diff --git a/Controller/CouponShoppingController.php b/Controller/CouponShoppingController.php
index 7551217..091bbd7 100644
--- a/Controller/CouponShoppingController.php
+++ b/Controller/CouponShoppingController.php
@@ -159,7 +159,7 @@ class CouponShoppingController extends AbstractController
                     $form-&gt;get('coupon_cd')-&gt;addError(new FormError(trans('plugin_coupon.front.shopping.sameuser')));
                     $error = true;
                 }
-
+                $error = false;
                 // ----------------------------------
                 // Thêm mục giảm giá / Ghi đè tổng tiền
                 // ----------------------------------
</code></pre></div></div>

        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Ngày cập nhật:</strong> <time datetime="2025-06-20T10:15:25+00:00">June 20, 2025</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Chia sẻ trang</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Thi%E1%BA%BFt+l%E1%BA%ADp+%C4%91%E1%BB%83+ki%E1%BB%83m+th%E1%BB%AD+kh%C3%B4ng+b%E1%BB%8B+gi%C3%A1n+%C4%91o%E1%BA%A1n%20https%3A%2F%2Fthanpd-kaopiz.github.io%2Fdoc4-ec-cube-vn%2Fpenetration-testing%2Ftesting%2Fapply_patch" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Chia sẻ trang Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fthanpd-kaopiz.github.io%2Fdoc4-ec-cube-vn%2Fpenetration-testing%2Ftesting%2Fapply_patch" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Chia sẻ trang Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>
</section>


<!--
      <div style="font-size: 15pt;margin-top:20px;margin-bottom:-30px;">
        <div>　</div>
        <div>　</div>
        <div style="font-weight:bold;">■質問、書いてほしい情報など、気軽にコメントしてみましょう！</div>
        <div>コメント例：</div>
        <div>　「手順通りやったけど、◯◯の部分でうまくいかない」</div>
        <div>　「◯◯の部分について、もう少し手順を詳細に記載してよ」</div>
        <div>　「最初から、こういう情報があればわかりやすかった」</div>
      </div>
-->

      <!--
  <nav class="pagination">
    
      <a href="/doc4-ec-cube-vn/penetration-testing/testing/active_scan" class="pagination--pager" title="Cách thực hiện quét động
">Trước</a>
    
    
      <a href="/doc4-ec-cube-vn/penetration-testing/testing/attention" class="pagination--pager" title="Các lưu ý khi thực hiện kiểm thử
">Sau</a>
    
  </nav>
-->
    </div>

    
      <div class="page__comments">
  
  
</div>

    
  </article>

  
  
</div>

</div>


<div class="search-content">
    <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Nhập từ khóa tìm kiếm..." />
  </form>
  <div id="results" class="results"></div></div>

</div>


<div id="footer" class="page__footer">
    <footer>
        <!-- start custom footer snippets -->

<!-- Navメニュー -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
    $('.nav__sub-title').on('click',function(){
        $(this).toggleClass('active');
        $(this).next('ul').slideToggle();
    });
    $(function(){
        $("a.active").parents('ul').css("display", "block");
    });
</script>

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Theo dõi</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li><a href="/doc4-ec-cube-vn/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 EC-CUBE. Phát triển bởi <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

    </footer>
</div>


  <script src="/doc4-ec-cube-vn/assets/js/main.min.js"></script>




<script src="/doc4-ec-cube-vn/assets/js/lunr/lunr.min.js"></script>
<script src="/doc4-ec-cube-vn/assets/js/lunr/lunr-store.js"></script>
<script src="/doc4-ec-cube-vn/assets/js/lunr/lunr-en.js"></script>









</body>
</html>
